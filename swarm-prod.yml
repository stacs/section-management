version: '3.7'
services:
  final-grades:
    image: ghcr.io/stacs/roster-management:latest
    networks:
      - collab-ingress-prod
    environment:
      VIRTUAL_HOST_WEIGHT: 5
      VIRTUAL_HOST: '/lts-roster-management/*'
      SERVICE_PORTS: 8080
      SPRING_PROFILES_ACTIVE: prod
    secrets:
      - source: prod_db_url
        target: db.url
      - source: prod_db_user
        target: db.user
      - source: prod_db_pass
        target: db.pass
      - source: prod_canvas_api_url
        target: canvas.apiUrl
      - source: prod_canvas_api_token
        target: canvas.apiToken
