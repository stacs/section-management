<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="https://www.thymeleaf.org">
    <head>
        <div th:replace="fragments/head :: head"></div>
    </head>

    <body>
        <div th:replace="fragments/header :: header"></div>
        <p>By default, courses are created in UVACanvas for each course roster or section listed in the Student Information System (SIS).
            The SIS Section Management tool allows instructors to add or remove additional course rosters or sections in a single course in UVACanvas.</p>
        <form id="rosterManagementForm" action="#" th:action="@{/validate}" th:object="${rosterManagementForm}" method="post">
            <h4>Course Information</h4>
            <p>You are managing SIS sections for the following course:</p>
            <strong>UVACanvas Course Name:</strong><div th:text="${courseName}">My Course Name</div>
            <strong>UVACanvas Course Code:</strong><div th:text="${courseCode}">My Course Code</div>
            <strong>UVACanvas Course SIS ID:</strong><div th:text="${courseSisId}">My Course SIS ID</div>

            <h4>Currently added SIS sections</h4>

            <p>Any additional SIS sections previously added to the course are listed below.
                Deselect previously added sections to remove them from the course (The original SIS sections in the course cannot be removed).
            </p>
            <div>
                <p th:if="${#lists.isEmpty(currentCourseSections)}">No additional SIS sections were previously added to the course</p>
                <ul th:else>
                    <li class="form-check" th:each="section : ${currentCourseSections}">
                        <input th:id="'section-input-' + ${section.id}" type="checkbox" onclick="selectRoster()"
                               th:field="*{sectionsToKeep}" th:value="${section.id}"
                               th:disabled="${section.crosslistedCourseId == null}" class="form-check-input"/>
                        <label th:for="'section-input-' + ${section.id}" class="form-check-label" th:inline="text">
                            <strong>[[${section.name}]]</strong> ([[${section.sisSectionId}]]) - [[${section.totalStudents}]] students
                        </label>
                    </li>
                </ul>
            </div>

            <h4>Add Additional SIS Sections</h4>
            <input id="show-waitlists" type="checkbox" onchange="showWaitlists(this)"/>
            <label for="show-waitlists">Show Waitlist Sections</label>
            <div>
                <label for="term-select">Select a term from the menu to view and select additional SIS sections to add to the course.  You can only add sections from a single term at a time.</label>
                <select id="term-select" th:field="*{selectedTerm}" onchange="selectTerm()" class="form-select mt-3">
                    <option selected th:value="-1">Select Term</option>
                    <option th:each="term : ${sectionsMap.keySet()}" th:value="${term.sisTermId}" th:text="${term.name}"></option>
                </select>
            </div>
            <div th:id="'term-div-' + ${sectionMap.key.sisTermId}" th:each="sectionMap : ${sectionsMap}" style="display: none;">
                <ul>
                    <li class="form-check" th:each="section : ${sectionMap.value}" th:data-waitlist="${section.isWaitlist}"
                        th:style="${section.isWaitlist ? 'display:none' : 'display:block'}">
                        <input th:id="'section-input-' + ${section.id}" type="checkbox" onclick="selectRoster()"
                               th:field="*{sectionsToAdd}" th:value="${section.id}" class="form-check-input"/>
                        <label th:for="'section-input-' + ${section.id}" class="form-check-label" th:inline="text">
                            <strong>[[${section.name}]]</strong> ([[${section.sisSectionId}]]) - [[${section.totalStudents}]] students
                        </label>
                    </li>
                </ul>
            </div>
            <div id="submitDiv">
                <button id="formSubmitButton" type="submit" class="btn btn-primary" disabled>Continue</button>
            </div>
        </form>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    </body>
</html>
